
.use_base_container: &use_base_container
  stage: test
  image: "${CI_REGISTRY_IMAGE}:latest"
  services:
    - name: docker:dind
      alias: docker

.run_test: &run_test
  <<: *use_base_container
  script:
    - pip3 install -e .
    - pytest -s $TEST_PATH
  tags:
    - p40
    - x86
  rules:
    - if: $CI_COMMIT_BRANCH
      when: on_success

🏗️ tools reconnaissance/filesystem:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/reconnaissance/test_filesystem.py

🏗️ tools test_architecture_core:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/architecture/test_core.py

🏗️ tools test_architecture_util:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/architecture/test_util.py

🏗️ tools test_agents_filesystem:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/agents/test_filesystem.py

🏗️ tools test_agents_models:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/agents/test_models.py
