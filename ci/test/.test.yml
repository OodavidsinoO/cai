
.use_base_container: &use_base_container
  stage: test
  image: "${CI_REGISTRY_IMAGE}:latest"
  services:
    - name: docker:dind
      alias: docker

.run_test: &run_test
  <<: *use_base_container
  script:
    - pip3 install -e .
    - pytest -s $TEST_PATH
  tags:
    - p40
    - x86
  rules:
    - if: $CI_COMMIT_BRANCH
      when: on_success

🏗️ tools reconnaissance/filesystem:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/reconnaissance/test_filesystem.py


🏗️ tools test_architecture:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/architecture


🏗️ tools test_agents:
  <<: *run_test
  variables:
    TEST_PATH: tests/tools/agents
